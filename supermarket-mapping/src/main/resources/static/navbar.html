<html>

<head>
	<title>Home Page</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://kit.fontawesome.com/54e0ebeaef.js" crossorigin="anonymous"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
	<!-- font icon -->


	<link rel="stylesheet" href="./CSS/styles.css">



	<!-- <link rel="stylesheet" href="./CSS/styles.css"> -->

	<script>
		$(document).ready(function () {
			if (localStorage.getItem('firstName') !== '') {
				$("#username").empty();
				$("#username").append("<p>" + localStorage.getItem('firstName') + "</p>");
			} else {
				 
			}
		});
	</script>
</head>

<body>

 

	<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
		<div class="container">
			<a href="" style="padding-right:10px;"><img src="./Images/download.png" class="rounded-pill"
					alt="graphic design logo" height="40" width="40" /></a>
			<input class=" my-sm-2" id="fillter" onkeyup="filterProductAndCategory()" type="search" placeholder="Search Product"
				aria-label="Search" />
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="collapsibleNavbar">

				<ul class="navbar-nav justify-content-end me-auto">


				</ul>
				<ul class="navbar-nav">
					
					<li class="nav-item" style="display: block;">
						<a class="nav-link category" href="Category.html">Category</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="index.html">Product</a>
					</li>
					
					<!-- <li class="nav-item" style="display: block;">
						<a class="nav-link order"  href="Orders.html">Orders</a>
						 
					</li> -->
					<li class="nav-item shoppig-cart" style="display: block;">
						<div><span class="text-white" id="cart-count" value="0"></span> <a href=" " class="float-top" data-bs-toggle="modal" data-bs-target="#exampleModal6" onclick="getMyCart();"
								><i class="fa fa-shopping-cart"
									style="font-size: 25px; color: white; "></i></a></div>
					</li>
					<li class="nav-item" style="padding-left: 2%;">
						<a href=""><img src="./Images/profile-icon.jpg" class="rounded-pill" alt="graphic design logo"
								height="40" width="40" /></a>
					</li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							<span id="first"></span>
						  </a>
						
					<ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
								<li><a href="Login.html" onclick="clearUser()" class="dropdown-item">Logout</a></li>
							</ul>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</nav>


<!-- cart model -->
<div class="modal fade" id="exampleModal5" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="exampleModalLabel">My Cart</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div id="cart">

				</div>
				<div class="total position-sticky py-3 bg-white" style="bottom: 0">

				</div>
			</div>
			<div class="modal-footer">
				
				<button type="button" onclick="myCart()" data-bs-dismiss="modal" class="btn btn-primary">Add your Cart</button>
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="exampleModal6" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="exampleModalLabel">My Cart added items</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div id="addCart">
					
				</div>
				<!-- <div class="total position-sticky py-3 bg-white" style="bottom: 0">

				</div> -->
			</div>
			<div class="modal-footer">
				
				<button type="button" onclick="placeOrder()" data-bs-toggle="modal" data-bs-target="#orderModal" data-bs-dismiss="modal" class="btn btn-primary">Place order</button>
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>


<div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
	<div class="modal-dialog">
	  <div class="modal-content">
		<div class="modal-header">
		  <h1 class="modal-title fs-5" id="orderModalLabel">My order</h1>
		  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		</div>
		<div class="modal-body">
			<div class="messageorder">Your Order Placed</div>
		  
		</div>
		<div class="modal-footer">
			  <button type="button" class="btn btn-primary" onclick="onindex()" data-bs-dismiss="modal">Ok</button>
			  <button type="button" class="btn btn-secondary" onclick="onindex()" data-bs-dismiss="modal">Close</button>
		</div>
	  </div>
	</div>
  </div>









	<script>

function onindex() {

	window.location = "index.html";
}
		


		$(document).ready(function () {
			let addcart='';
			var len = [];
				
			
				$.ajax({
					dataTypa: "JSON",
					url: "http://localhost:8080/cart",
					type: "GET",
					data: {
						"userId": localStorage.getItem("userId"),
						"orderStatus": "ACTIVE"
					},
					success: function (response) {
	  
						$.each(response.item, function (index, productData) {
						
								len.push(productData.itemId);
	 
						})
							
							
						$("#cart-count").append(len.length);
	
	
					},
					error : function(error, status){
						$("#cart-count").append("0");
	
					}
	
				})

			









			document.getElementById("fillter").size = "50";

			if (localStorage.getItem("userRole") === "Admin") {

				$(".shoppig-cart").attr("style", "display:none");
			}

			if (localStorage.getItem("userRole") === "Admin") {

				$(".order").attr("style", "display:none");
 
				}
				if (localStorage.getItem("userRole") === "Customer") {

				$(".category").attr("style", "display:none");

				}




			if (localStorage.getItem('firstName') !== '') {
				$("#first").empty();
				$("#first").append("<p>" + localStorage.getItem('firstName') + "</p>");
			} else {
				 
			}
		});

		let dds = document.querySelectorAll('.dropdown-toggle')
		dds.forEach((dd) => {
			dd.addEventListener('click', function (e) {
				var el = this.nextElementSibling
				el.style.display = el.style.display === 'block' ? 'none' : 'block'
			})
		})





		let name = localStorage.getItem('firstName') ? localStorage.getItem('firstName') : ''

		if (name == '') {
				
			window.location = "Login.html";
		}
		function clearUser() {

			localStorage.removeItem("userRole");
			localStorage.removeItem("emailId");
			localStorage.removeItem("lastName");
			localStorage.removeItem("firstName");
			localStorage.removeItem("userId");
		}








	</script>
</body>

</html>